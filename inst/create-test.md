指定されたファイルについてのユニットテストを作成してください。
指定されていない場合は、どのファイルか僕に聞いてください。

テスト名は、 hoge.tsに対しては同じディレクトリに hoge_test.tsになります。

# テスト作成ガイド

## 基本ルール

- テストファイルの命名規則：`hoge.ts` → 同じディレクトリに `hoge_test.ts`
- テストの優先順位：副作用のない関数から開始
- 依存性の扱い：外部依存はモック化または注入可能な設計に

## 作成手順

### ステップ1：テスト対象の分析

1. 副作用のない関数を特定
2. 副作用のある関数の依存関係を分析
3. 必要に応じて、関数の分割や依存性注入の設計を検討

### ステップ2：テスト環境の準備

1. モックが必要な外部依存の特定
2. 一時ファイル/ディレクトリの取り扱い方針決定
3. 依存性注入の実装（必要な場合）

#### 一時ディレクトリの作成方法

Denoでは、`Deno.makeTempDir()`を使用して一時ディレクトリを作成できます：

```typescript
// オプションなしで作成（システムのデフォルト一時ディレクトリに作成される）
const tempDir = await Deno.makeTempDir();

// プレフィックスを指定して作成（プレフィックスの後にユニークな文字列が付加される）
const tempDir = await Deno.makeTempDir({ prefix: "test-" });
```

特徴：

- システムの一時ディレクトリ内に作成される
- 毎回ユニークな名前が自動生成される（衝突の心配なし）
- 明示的な削除は不要（OSのクリーンアップポリシーに従う）

#### 依存性注入の実装

- 外部依存を持つ関数は、最後の引数に`dependencies`オブジェクトを受け取るように実装
- `dependencies`には、モック可能なインターフェースを定義
- デフォルトの実装も提供し、テスト時のみモックに置き換え

### ステップ3：基本機能のテスト実装

1. 正常系（ハッピーパス）のテストケース作成
2. 典型的な入力値での動作確認
3. 境界値のテスト

### ステップ4：エラーケースのテスト実装

1. 異常系の入力値テスト
2. エラー発生時の動作確認
3. リソース制約時の動作確認

### ステップ5：テストカバレッジの最適化

1. カバレッジレポートの確認
2. カバレッジ目標：
   - 行カバレッジ: 90%以上
   - 分岐カバレッジ: 85%以上
3. 未カバーの部分の分析と追加テスト実装

## 完了条件

- [ ] すべてのテストが正常に実行される
- [ ] カバレッジ目標を達成
- [ ] エラーケースが適切にハンドリングされている
- [ ] 外部依存が適切にモック化されている
